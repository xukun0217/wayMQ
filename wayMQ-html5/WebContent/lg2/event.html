<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>


<style type="text/css"></style>

<script type="text/javascript" src="../../js/jquery.js"></script>
<script type="text/javascript">
	var context = new Object();
	context.event_id = "default";
	context.member_id = "default";

	function debugShowJSON(json) {
		var str = JSON.stringify(json);
		$("#text_debug_json_output").text(str);
	}

	function showPage(id) {
		$("#page_event_home").hide();
		$("#page_event_leave").hide();
		$("#page_event_join").hide();
		$(id).show();
	}

	function showPageEventLeave() {
		showPage("#page_event_leave");

	}

	function showPageEventJoin() {
		showPage("#page_event_join");

	}

	function showPageEventHome() {
		showPage("#page_event_home");
		$("#list_join_temp").hide();
		$("#text_event_info_output").text("loading...");
		var url = "?do=get";
		$.getJSON(url, function(json, statusText, xhr) {
			debugShowJSON(json);
		});
	}

	function doJoinEvent() {
		var phone = $("#edit_join_phone").val();
		var nickname = $("#edit_join_nickname").val();

		var url = "?do=join";
		url = url + "&phone=" + phone;
		url = url + "&nickname=" + nickname;
		$.getJSON(url, function(json, statusText, xhr) {
			debugShowJSON(json);
			alert("join event!");
			showPageEventHome();
		});
	}

	function doLeaveEvent() {
		var phone = $("#edit_leave_phone").val();
		var url = "?do=leave";
		url = url + "&phone=" + phone;
		$.getJSON(url, function(json, statusText, xhr) {
			debugShowJSON(json);
			alert("leave event!");
			showPageEventHome();
		});
	}

	function setupButtonHandler() {

		$("#button_show_event_home").click(function() {
			showPageEventHome();
		});
		$("#button_show_event_join").click(function() {
			showPageEventJoin();
		});
		$("#button_show_event_leave").click(function() {
			showPageEventLeave();
		});

		$("#button_event_join").click(function() {
			doJoinEvent();
		});
		$("#button_event_leave").click(function() {
			doLeaveEvent();
		});

		$("#button_home_join").click(function() {
			showPageEventJoin();
		});
		$("#button_home_leave").click(function() {
			showPageEventLeave();
		});

	}

	$(document).ready(function() {

		//	setCurrentPanel("#login");
		showPageEventHome();

		setupButtonHandler();

	});
</script>

</head>
<body>

	<h1>lg2/event</h1>


	<div id='page_debug_home' class='page'>
		<hr />
		<h2>debug</h2>

		<button id='button_show_event_home'>show event home</button>
		<button id='button_show_event_join'>show event join</button>
		<button id='button_show_event_leave'>show event leave</button>

		<div id='text_debug_json_output'>(JSON-output)</div>


	</div>


	<div id='page_event_home' class='page'>
		<hr />
		<h2>
			活动:<a id='text_event_title' href="#">title</a>
		</h2>

		<div id='text_event_content'>content</div>

		<div>
			<button id='button_home_join'>报名参加</button>
			<button id='button_home_leave'>取消报名</button>
		</div>

		<div>
			<div>报名名单:</div>
			<ol id='list_join'>
				<li>bill</li>
				<li>lilei</li>
				<li>mike</li>
			</ol>
			<ol id='list_join_temp'>
				<li>bill</li>
				<li>lilei</li>
				<li>mike</li>
			</ol>
		</div>

	</div>

	<div id='page_event_join' class='page'>
		<hr />
		<h2>报名参加</h2>

		<div>
			<div>
				<input id='edit_join_phone' value='phone' />
			</div>
			<div>
				<input id='edit_join_nickname' value='nickname' />
			</div>
			<div>
				<button id='button_event_join'>报名</button>
			</div>

		</div>


	</div>
	<div id='page_event_leave' class='page'>
		<hr />
		<h2>取消报名</h2>
		<div>
			<div>
				<input id='edit_leave_phone' value='phone' />
			</div>
			<div>
				<button id='button_event_leave'>取消报名</button>
			</div>

		</div>
	</div>

</body>
</html>
